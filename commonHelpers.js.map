{"version":3,"file":"commonHelpers.js","sources":["../src/img/icons/info.svg","../src/img/icons/icon-error.svg","../src/js/render-function.js","../src/js/js-loader.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__98ffb9cc__\"","export default \"__VITE_ASSET__eb775c6f__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport info from '/img/icons/info.svg';\nimport error from '/img/icons/icon-error.svg';\n\nconst icons = {\n  info,\n  error,\n};\n\nconst galleryItem = new SimpleLightbox('.gallery li a');\n\nexport function showError(type, text) {\n  let color, maxWidth;\n\n  switch (type.toLowerCase()) {\n    case 'error':\n      color = 'red';\n      break;\n    case 'info':\n      color = 'blue';\n      break;\n    case 'success':\n      color = 'green';\n      break;\n    default:\n      break;\n  }\n  window.innerWidth < 768 ? (maxWidth = '100%') : (maxWidth = '33%');\n  iziToast.show({\n    title: `${type}`,\n    color: color,\n    maxWidth: maxWidth,\n    iconUrl: icons[type.toLowerCase()],\n    position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter, center\n    message: `${text}`,\n  });\n}\nexport async function renderPhotoList(photos, container) {\n  //   console.log(photos);\n  const markup = photos.hits\n    .map(photo => {\n      return `<li>\n                <a href=\"${photo.largeImageURL}\"><img src='${photo.webformatURL}' alt='${photo.tags}'></a>\n                <div class=\"content\">\n                    <div class=\"item\"><h3>Likes</h3><p>${photo.likes}</p></div>\n                    <div class=\"item\"><h3>Views</h3><p>${photo.views}</p></div>\n                    <div class=\"item\"><h3>Comments</h3><p>${photo.comments}</p></div>\n                    <div class=\"item\"><h3>Downloads</h3><p>${photo.downloads}</p></div>\n                </div>\n            </li>`;\n    })\n    .join('');\n  container.textContent = '';\n  container.insertAdjacentHTML('beforeend', markup);\n  galleryItem.refresh();\n}\nexport async function renderMore(photos, container) {\n  //   console.log(photos);\n  const markup = photos.hits\n    .map(photo => {\n      return `<li>\n                  <a href=\"${photo.largeImageURL}\"><img src='${photo.webformatURL}' alt='${photo.tags}'></a>\n                  <div class=\"content\">\n                      <div class=\"item\"><h3>Likes</h3><p>${photo.likes}</p></div>\n                      <div class=\"item\"><h3>Views</h3><p>${photo.views}</p></div>\n                      <div class=\"item\"><h3>Comments</h3><p>${photo.comments}</p></div>\n                      <div class=\"item\"><h3>Downloads</h3><p>${photo.downloads}</p></div>\n                  </div>\n              </li>`;\n    })\n    .join('');\n  // container.textContent = '';\n  container.insertAdjacentHTML('beforeend', markup);\n  galleryItem.refresh();\n}\n","export default class JsLoader {\n  constructor() {\n    this.element = document.querySelector('.js-loader-text');\n    this.options = {\n      text: 'Loading images, please wait',\n      loader: '.',\n      count: 3,\n    };\n  }\n\n  createInterval({ count, text, loader }) {\n    // console.log('New interval');\n    // console.log(this);\n    this.element.classList.remove('js-hidden');\n    let acc = 0;\n    this.interval = setInterval(() => {\n      if (acc > count) acc = 0;\n      this.element.innerText = text.padEnd(text.length + acc, loader);\n      acc++;\n    }, 200);\n  }\n  removeInterval(id) {\n    // console.log('Interval cleared', id);\n    clearInterval(id);\n    this.element.classList.add('js-hidden');\n  }\n  init() {\n    this.element.classList.add('js-hidden');\n  }\n}\n","import { renderPhotoList, renderMore, showError } from './render-function';\nimport JsLoader from './js-loader';\n\nexport async function pixabayRequestNew(searchParams, container) {\n  const jsLoader = new JsLoader();\n  jsLoader.createInterval(jsLoader.options);\n  //   setTimeout(() => {\n  await fetch(`https://pixabay.com/api/?${searchParams}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(photos => {\n      //   console.log(photos);\n      if (!photos.hits || photos.hits.length === 0)\n        throw new Error('Error! Nothing to load');\n      renderPhotoList(photos, container);\n    })\n    .catch(error => {\n      //   console.log(error);\n      showError(\n        'Error',\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    })\n    .finally(() => jsLoader.removeInterval(jsLoader.interval));\n  //   }, 2000);\n}\nexport async function pixabayRequestMore(searchParams, container) {\n  const jsLoader = new JsLoader();\n  jsLoader.createInterval(jsLoader.options);\n  //   setTimeout(() => {\n  await fetch(`https://pixabay.com/api/?${searchParams}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(photos => {\n      //   console.log(photos);\n      if (!photos.hits || photos.hits.length === 0)\n        throw new Error('Error! Nothing to load');\n      renderMore(photos, container).then(() => {\n        let rect = document.querySelector('.gallery li');\n        rect = rect.getBoundingClientRect();\n        let gap = 20;\n        // console.log(rect, rect.height);\n        window.scrollBy({\n          top: (rect.height + gap) * 2,\n          behavior: 'smooth',\n        });\n      });\n    })\n\n    .catch(error => {\n      //   console.log(error);\n      showError(\n        'Error',\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    })\n    .finally(() => jsLoader.removeInterval(jsLoader.interval));\n  //   }, 2000);\n}\n","import { pixabayRequestNew, pixabayRequestMore } from './js/pixabay-api';\nimport { showError } from './js/render-function';\nimport JsLoader from './js/js-loader';\n\nconst serachForm = document.querySelector('form');\nconst photoList = document.querySelector('.photo-list');\nconst loadMore = document.querySelector('button[data-request=\"load-more\"]');\nconst jsLoader = new JsLoader();\njsLoader.init();\n\nlet searchParams = new URLSearchParams({\n  key: '7706316-da1567048322714709989c4f8',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: 1,\n  per_page: 15,\n  //   per_page: 50,\n});\nlet REQUEST_PAGE = 1;\nserachForm.addEventListener('submit', e => {\n  e.preventDefault();\n  const inputValue = serachForm.elements[0].value.trim();\n  if (!inputValue) {\n    showError('Info', 'Search input must be filled!');\n    return;\n  }\n  searchParams.set('q', inputValue);\n  pixabayRequestNew(searchParams, photoList);\n});\nloadMore.addEventListener('click', e => {\n  e.preventDefault();\n  searchParams.set('page', REQUEST_PAGE);\n  REQUEST_PAGE++;\n  pixabayRequestMore(searchParams, photoList);\n});\n"],"names":["info","error","icons","galleryItem","SimpleLightbox","showError","type","text","color","maxWidth","iziToast","renderPhotoList","photos","container","markup","photo","renderMore","JsLoader","count","loader","acc","id","pixabayRequestNew","searchParams","jsLoader","response","pixabayRequestMore","rect","gap","serachForm","photoList","loadMore","REQUEST_PAGE","e","inputValue"],"mappings":"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"}