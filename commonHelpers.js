import{S as g,i as v,a as y}from"./assets/vendor-b0d10f48.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(e){if(e.ep)return;e.ep=!0;const s=n(e);fetch(e.href,s)}})();const L="/goit-js-hw-12/assets/info-28eb2f9b.svg",w="/goit-js-hw-12/assets/icon-error-9681c3d4.svg",E={info:L,error:w},I=new g(".gallery li a");function u(t,o){const r={error:"red",info:"blue",success:"green"}[t.toLowerCase()];v.show({title:`${t}`,color:r,maxWidth:window.innerWidth<768?"100%":"33%",iconUrl:E[t.toLowerCase()],position:"topRight",message:`${o}`})}function S(t){return`<li>
                <a href="${t.largeImageURL}"><img src='${t.webformatURL}' alt='${t.tags}'></a>
                <div class="content">
                    <div class="item"><h3>Likes</h3><p>${t.likes}</p></div>
                    <div class="item"><h3>Views</h3><p>${t.views}</p></div>
                    <div class="item"><h3>Comments</h3><p>${t.comments}</p></div>
                    <div class="item"><h3>Downloads</h3><p>${t.downloads}</p></div>
                </div>
            </li>`}async function P(t,o,n){const r=t.hits.map(e=>S(e)).join("");n||(o.textContent=""),o.insertAdjacentHTML("beforeend",r),I.refresh()}class p{constructor(){this.element=document.querySelector(".js-loader-text"),this.options={text:"Loading images, please wait",loader:".",count:3}}createInterval({count:o,text:n,loader:r}){this.element.classList.remove("js-hidden");let e=0;this.interval=setInterval(()=>{e>o&&(e=0),this.element.innerText=n.padEnd(n.length+e,r),e++},200)}removeInterval(o){clearInterval(o),this.element.classList.add("js-hidden")}init(){this.element.classList.add("js-hidden")}}async function m(t,o,n=!1,r=null){const e=new p;e.createInterval(e.options);try{const i=(await y.get(`https://pixabay.com/api/?${t}`)).data;if(r&&(console.log(i.totalHits,r),console.log(Math.ceil(i.totalHits/r.curPage)),console.log(r.page>Math.ceil(i.totalHits/r.curPage))),!i.hits||i.hits.length===0)throw new Error("Error! Nothing to load");await P(i,o,n);const h=document.querySelector(".gallery li");if(n&&h){const{height:f}=h.getBoundingClientRect();window.scrollBy({top:(f+20)*2,behavior:"smooth"})}if(i.totalHits%r<=0)throw new Error("Error! Nothing to load")}catch{u("Error",n?"We're sorry, but you've reached the end of search results.":"Sorry, there are no images matching your search query. Please try again!")}finally{e.removeInterval(e.interval)}}const a={searchForm:document.querySelector("form"),photoList:document.querySelector(".photo-list"),loadMore:document.querySelector('button[data-request="load-more"]')},q=new p;q.init();let l=new URLSearchParams({key:"7706316-da1567048322714709989c4f8",q:"",image_type:"photo",orientation:"horizontal",safesearch:!0,page:1,per_page:50}),c=1,d;a.searchForm.addEventListener("submit",t=>{t.preventDefault();const o=a.searchForm.elements[0].value.trim();if(!o){u("Info","Search input must be filled!");return}l.set("q",o),c=1,m(l,a.photoList,!1).then(()=>{a.loadMore.classList.remove("js-hidden")})});a.loadMore.addEventListener("click",t=>{t.preventDefault(),a.loadMore.classList.add("js-hidden"),l.set("page",++c),d.page=c,d.perPage=l.get("per_page"),m(l,a.photoList,!0,d).then(()=>{a.loadMore.classList.remove("js-hidden")}),console.log(c,l.get("per_page")),console.log(c*l.get("per_page"))});
//# sourceMappingURL=commonHelpers.js.map
