import{S as g,i as v,a as y}from"./assets/vendor-b0d10f48.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function s(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(e){if(e.ep)return;e.ep=!0;const a=s(e);fetch(e.href,a)}})();const L="/goit-js-hw-12/assets/info-28eb2f9b.svg",w="/goit-js-hw-12/assets/icon-error-9681c3d4.svg",E={info:L,error:w},I=new g(".gallery li a");function u(t,o){const r={error:"red",info:"blue",success:"green"}[t.toLowerCase()];v.show({title:`${t}`,color:r,maxWidth:window.innerWidth<768?"100%":"33%",iconUrl:E[t.toLowerCase()],position:"topRight",message:`${o}`})}function S(t){return`<li>
                <a href="${t.largeImageURL}"><img src='${t.webformatURL}' alt='${t.tags}'></a>
                <div class="content">
                    <div class="item"><h3>Likes</h3><p>${t.likes}</p></div>
                    <div class="item"><h3>Views</h3><p>${t.views}</p></div>
                    <div class="item"><h3>Comments</h3><p>${t.comments}</p></div>
                    <div class="item"><h3>Downloads</h3><p>${t.downloads}</p></div>
                </div>
            </li>`}async function P(t,o,s){const r=t.hits.map(e=>S(e)).join("");s||(o.textContent=""),o.insertAdjacentHTML("beforeend",r),I.refresh()}class p{constructor(){this.element=document.querySelector(".js-loader-text"),this.options={text:"Loading images, please wait",loader:".",count:3}}createInterval({count:o,text:s,loader:r}){this.element.classList.remove("js-hidden");let e=0;this.interval=setInterval(()=>{e>o&&(e=0),this.element.innerText=s.padEnd(s.length+e,r),e++},200)}removeInterval(o){clearInterval(o),this.element.classList.add("js-hidden")}init(){this.element.classList.add("js-hidden")}}async function m(t,o,s=!1,r=null){const e=new p;e.createInterval(e.options);try{const n=(await y.get(`https://pixabay.com/api/?${t}`)).data;if(r&&(console.log(n.totalHits,r),console.log(Math.ceil(n.totalHits/r.curPage)),console.log(r.page>Math.ceil(n.totalHits/r.curPage))),!n.hits||n.hits.length===0)throw new Error("Error! Nothing to load");await P(n,o,s);const h=document.querySelector(".gallery li");if(s&&h){const{height:f}=h.getBoundingClientRect();window.scrollBy({top:(f+20)*2,behavior:"smooth"})}if(n.totalHits%r<=0)throw new Error("Error! Nothing to load")}catch{u("Error",s?"We're sorry, but you've reached the end of search results.":"Sorry, there are no images matching your search query. Please try again!")}finally{e.removeInterval(e.interval)}}const i={searchForm:document.querySelector("form"),photoList:document.querySelector(".photo-list"),loadMore:document.querySelector('button[data-request="load-more"]')},q=new p;q.init();let c=new URLSearchParams({key:"7706316-da1567048322714709989c4f8",q:"",image_type:"photo",orientation:"horizontal",safesearch:!0,page:1,per_page:50}),l=1,d;i.searchForm.addEventListener("submit",t=>{t.preventDefault();const o=i.searchForm.elements[0].value.trim();if(!o){u("Info","Search input must be filled!");return}c.set("q",o),l=1;try{m(c,i.photoList,!1),i.loadMore.classList.remove("js-hidden")}catch(s){console.log(s)}});i.loadMore.addEventListener("click",t=>{t.preventDefault(),i.loadMore.classList.add("js-hidden"),c.set("page",++l),d.page=l,d.perPage=c.get("per_page");try{m(c,i.photoList,!0,d),i.loadMore.classList.remove("js-hidden"),console.log(l,c.get("per_page")),console.log(l*c.get("per_page"))}catch{}});
//# sourceMappingURL=commonHelpers.js.map
