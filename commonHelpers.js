import{a as f,S as v,i as w}from"./assets/vendor-b0d10f48.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();async function p(t){return(await f.get(`https://pixabay.com/api/?${t}`)).data}const y="/goit-js-hw-12/assets/info-28eb2f9b.svg",L="/goit-js-hw-12/assets/icon-error-9681c3d4.svg",E={info:y,error:L},q=new v(".gallery li a");function m(t,e){const a={error:"red",info:"blue",success:"green"}[t.toLowerCase()];w.show({title:`${t}`,color:a,maxWidth:window.innerWidth<768?"100%":"33%",iconUrl:E[t.toLowerCase()],position:"topRight",message:`${e}`})}function S(t){return`<li>
            <a href="${t.largeImageURL}"><img src='${t.webformatURL}' alt='${t.tags}'></a>
            <div class="content">
                <div class="item"><h3>Likes</h3><p>${t.likes}</p></div>
                <div class="item"><h3>Views</h3><p>${t.views}</p></div>
                <div class="item"><h3>Comments</h3><p>${t.comments}</p></div>
                <div class="item"><h3>Downloads</h3><p>${t.downloads}</p></div>
            </div>
        </li>`}function g(t,e,o){const a=t.map(r=>S(r)).join("");o||(e.innerHTML=""),e.insertAdjacentHTML("beforeend",a),q.refresh()}class P{constructor(){this.element=document.querySelector(".js-loader-text"),this.options={text:"Loading images, please wait",loader:".",count:3}}show(){this.element.classList.remove("js-hidden");let e=0;this.interval=setInterval(()=>{e>this.options.count&&(e=0),this.element.innerText=this.options.text.padEnd(this.options.text.length+e,this.options.loader),e++},200)}remove(){clearInterval(this.interval),this.element.classList.add("js-hidden")}}const n={form:document.querySelector("form"),gallery:document.querySelector(".photo-list"),loadMore:document.querySelector('button[data-request="load-more"]')},l=new P;let c=new URLSearchParams({key:"7706316-da1567048322714709989c4f8",image_type:"photo",orientation:"horizontal",safesearch:!0,page:1,per_page:15}),i={};i.request_page=1;i.perPage=c.get("per_page");const h={pageLimit(t){i.limit=Math.ceil(t.totalHits/i.perPage),console.log(i);const e=i.request_page>=i.limit;return console.log(this,e),e},hits(t){const e=!t.hits||t.hits.length==0;return console.log(this,e),e}};function b(){const t=document.querySelector(".gallery li");if(t){const{height:e}=t.getBoundingClientRect();window.scrollBy({top:(e+20)*2,behavior:"smooth"})}}const d={show(){n.loadMore.classList.remove("js-hidden")},hide(){n.loadMore.classList.add("js-hidden")}};n.form.addEventListener("submit",async t=>{t.preventDefault(),i.request_page=1;const e=n.form.elements[0].value.trim();if(!e){m("Info","Search input must be filled!");return}c.set("q",e),l.show();try{const o=await p(c);if(console.log(o),h.hits(o))throw l.remove(),new Error("Error! No data privided");if(g(o.hits,n.gallery,!1),h.pageLimit(o))throw d.hide(),l.remove(),new Error("Error! No more pages");d.show(),l.remove()}catch(o){console.log(o),m("Error","We're sorry, but you've reached the end of search results.")}});n.loadMore.addEventListener("click",async t=>{t.preventDefault(),d.hide(),c.set("page",++i.request_page),i.perPage=c.get("per_page");try{const e=await p(c);if(h.hits(e))throw new Error("Error! Nothing to load");if(g(e.hits,n.gallery,!0),b(),h.pageLimit(e))throw l.remove(),d.hide(),new Error("Error! Nothing to load");l.remove(),d.show()}catch(e){console.log(e),m("Error","Sorry, there are no images matching your search query. Please try again!")}});
//# sourceMappingURL=commonHelpers.js.map
